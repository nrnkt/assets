var T=Object.defineProperty,x=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var v=(l,t,s)=>t in l?T(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s,f=(l,t)=>{for(var s in t||(t={}))j.call(t,s)&&v(l,s,t[s]);if(g)for(var s of g(t))B.call(t,s)&&v(l,s,t[s]);return l},h=(l,t)=>x(l,O(t));import{g as A,h as F,R as e,j as H,r as R,l as M,o as D,G as r,aE as I,aF as L,aG as S,aH as u,aI as _,aJ as m,aK as q,aL as G,aM as V,aN as X,aO as $,aP as z,aQ as J,E as K,W as N,X as Q,Y as W,Z as Y,_ as Z,$ as U,V as ee,a0 as te}from"./vendor.eb3334f9.js";import{b as C}from"./index.esm.2832c82c.js";import{F as ae}from"./form-item.f9b6feee.js";import"./index.13b3a8f8.js";import"./index.efb1e4d4.js";const P={id:0,path:"",isPublic:!1,hide:"",upload:!1,only_shows:"",readme:""},ie=()=>{const l=A(),{t}=F(),[s,w]=e.useState([]),[c,d]=e.useState(P),[p,b]=e.useState(!1),[k,y]=e.useState(!1),o=H(),i=()=>{y(!0),C.get("metas").then(a=>{y(!1);const n=a.data;n.code!==200?l({title:t(n.message),status:"error",duration:3e3,isClosable:!0}):w(n.data)})};return R.exports.useEffect(()=>{i()},[]),e.createElement(M,{w:"full"},e.createElement(D,null,e.createElement(r,{onClick:()=>{d(P),b(!1),o.onOpen()}},t("Add")),e.createElement(r,{colorScheme:"orange",isLoading:k,onClick:()=>{i()}},t("Refresh"))),e.createElement(M,{overflowX:"auto"},e.createElement(I,{w:"full"},e.createElement(L,null,e.createElement(S,null,e.createElement(u,null,t("path")),e.createElement(u,null,t("isPublic")),e.createElement(u,null,t("hide")),e.createElement(u,null,t("upload")),e.createElement(u,null,t("operation")))),e.createElement(_,null,s.map(a=>e.createElement(S,{key:a.path},e.createElement(m,null,a.path),e.createElement(m,null,a.isPublic?"true":"false"),e.createElement(m,null,a.hide),e.createElement(m,null,a.upload?"true":"false"),e.createElement(m,{whiteSpace:"nowrap"},e.createElement(r,{onClick:()=>{d(a),b(!0),o.onOpen()}},t("Edit")),e.createElement(q,null,e.createElement(G,null,e.createElement(r,{ml:"1",colorScheme:"red"},t("Delete"))),e.createElement(V,{whiteSpace:"normal"},e.createElement(X,null),e.createElement($,null),e.createElement(z,null,t("Confirmation!")),e.createElement(J,null,e.createElement(K,{mb:"1"},t('Are you sure you want to delete "{{name}}" ?',{name:a.path})),e.createElement(r,{colorScheme:"red",ml:"1",onClick:()=>{C.delete("meta",{params:{id:a.id}}).then(n=>{const E=n.data;E.code!==200?l({title:t(E.message),status:"error",duration:3e3,isClosable:!0}):(l({title:t(E.message),status:"success",duration:3e3,isClosable:!0}),i())})}},t("Confirm"))))))))))),e.createElement(N,{isOpen:o.isOpen,onClose:o.onClose,size:"6xl"},e.createElement(Q,null),e.createElement(W,null,e.createElement(Y,null,t(p?"Save":"Add")),e.createElement(Z,null),e.createElement(U,{pb:6},e.createElement(ee,{spacing:"2"},[{name:"path",description:"Path",type:"string"},{name:"isPublic",description:"authentication required or not",type:"bool"},{name:"hide",description:"Hide Files(split by ,)",type:"string"},{name:"only_shows",description:"Only show files(split by ,)",type:"string"},{name:"upload",description:"Allow visitors to upload",type:"bool"},{name:"readme",description:"Readme url",type:"string"}].map(a=>e.createElement(ae,{key:a.name,label:a.name,type:a.type,description:a.description,value:c[a.name],required:a.name==="path",onChange:n=>{a.type!=="bool"?d(h(f({},c),{[a.name]:n})):d(h(f({},c),{[a.name]:!c[a.name]}))}})))),e.createElement(te,null,e.createElement(r,{mr:3,colorScheme:"gray",onClick:o.onClose},t("Cancel")),e.createElement(r,{onClick:()=>{C.post(`meta/${p?"save":"create"}`,c).then(a=>{const n=a.data;n.code!==200?(l({title:t(n.message),status:"error",duration:3e3,isClosable:!0}),p||(i(),o.onClose())):(l({title:t(n.message),status:"success",duration:3e3,isClosable:!0}),i(),o.onClose())})}},t("Save"))))))};export{ie as default};
