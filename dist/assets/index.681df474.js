var ft=Object.defineProperty,pt=Object.defineProperties;var gt=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var mt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var Be=(e,t,r)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,H=(e,t)=>{for(var r in t||(t={}))mt.call(t,r)&&Be(e,r,t[r]);if(Ie)for(var r of Ie(t))ht.call(t,r)&&Be(e,r,t[r]);return e},Re=(e,t)=>pt(e,gt(t));var le=(e,t,r)=>new Promise((n,o)=>{var s=u=>{try{f(r.next(u))}catch(d){o(d)}},i=u=>{try{f(r.throw(u))}catch(d){o(d)}},f=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,i);f((r=r.apply(e,t)).next())});import{r as l,u as D,g as Y,h as R,j as Te,k as ue,R as a,l as _,I as de,H as xe,P as wt,n as Ae,o as N,p as V,q,F as fe,L as W,s as vt,v as Z,x as yt,C as K,V as pe,y as ze,z as bt,A as Le,D as $e,E as Q,G as ge,J as c,K as xt,M as He,N as De,O as Ne,Q as Et,U as Ct,W as St,X as Mt,Y as Ft,Z as Ot,_ as kt,$ as jt,a0 as _t}from"./vendor.eb3334f9.js";import{a as Ee,i as me,b as ee,I as P,G as k,M as Pt,B as It,c as Bt,d as Rt,F as Tt,g as At,e as zt,f as Lt,h as $t,j as Ht,k as Dt,l as Ue,m as Nt,n as Ut,o as Vt,p as qt,q as Wt,r as Kt,s as Gt,D as Jt,t as Xt,u as Yt,v as Zt,w as Qt,O as er,x as tr}from"./index.esm.2832c82c.js";import{_ as Ve}from"./index.13b3a8f8.js";import{c as rr}from"./copy-clip.08e8f9de.js";const qe=(...e)=>e.join("/").replace(/\/{2,}/g,"/");let Ce;const nr=Ee.CancelToken,ar=()=>{const{userName:e,password:t,page:r}=l.exports.useContext(P),{pathname:n}=D();let o=n;return{path:()=>me.post("path",{path:o,userName:e,password:t,page_num:r.page_num,page_size:r.page_size},{cancelToken:new nr(function(i){Ce=i})}),cancelPath:()=>{Ce&&Ce()},mkdir:s=>{const i=qe(o,s);return ee.post("mkdir",{path:i})},rename:(s,i)=>{const f=qe(o,i);return ee.post("rename",{name:s,path:f})},move:(s,i)=>ee.post("move",{src_dir:o,dst_dir:i,names:s}),copy:(s,i)=>ee.post("copy",{src_dir:o,dst_dir:i,names:s}),refresh:()=>ee.post("refresh",{path:o})}};function or(e){return k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M352 115h90c3.3 0 6-2.7 6-6 0-8.2-3.7-16-10-21.3l-77.1-64.2c-4.9-4.1-14.2-7.4-20.6-7.4-4.1 0-7.4 3.3-7.4 7.4V96c.1 10.5 8.6 19 19.1 19z"}},{tag:"path",attr:{d:"M307 96V16H176c-17.6 0-32 14.4-32 32v336c0 17.6 14.4 32 32 32h240c17.6 0 32-14.4 32-32V141h-96c-24.8 0-45-20.2-45-45z"}},{tag:"path",attr:{d:"M116 412V80H96c-17.6 0-32 14.4-32 32v352c0 17.6 14.4 32 32 32h256c17.6 0 32-14.4 32-32v-20H148c-17.6 0-32-14.4-32-32z"}}]})(e)}function sr(e){return k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 119c0-13.3-9.4-23-22.8-23H198.9c-2.8 0-4.3-.6-6.1-2.4l-22.5-22.5-.2-.2c-4.9-4.6-8.9-6.9-17.3-6.9H56.7C42.9 64 32 74.3 32 87v73.7c0 1.6 1.7 1.5 3 .7s5-1.4 7-1.4h428c2 0 5.7.6 7 1.4 1.3.8 3 .9 3-.7V119zM32 416.4c0 17.5 14.2 31.6 31.6 31.6H448c17.6 0 32-14.4 32-32V204c0-8.8-7.2-16-16-16H48c-8.8 0-16 7.2-16 16v212.4z"}}]})(e)}const ir=(e=!1)=>{const{type:t}=l.exports.useContext(P);let{pathname:r}=D(),n="http://localhost:5244/",o=r.endsWith("/")?r.slice(0,-1):r;return t==="file"&&(o=o.substring(0,o.lastIndexOf("/"))),e?`${n}p${o}`:`${n}d${o}`},cr=e=>Pt.hashStr(e),We=e=>cr(e).slice(8,24),lr=()=>{const{getSetting:e,password:t,loggedIn:r}=l.exports.useContext(P);return(n,o=!0)=>{const s=o?encodeURI(n):n;if(e("check down link")!=="true")return s;const i=n.split("/").pop(),f=localStorage.getItem("admin-token");if(r){const d=We(`alist-${f}-${i}`);return s+(o?encodeURI(`?sign=${d}`):`?sign=${d}`)}if(!t)return s;const u=We(`alist-${t}-${i}`);return s+(o?encodeURI(`?pw=${u}`):`?pw=${u}`)}},Se=(e=!1,t=!0)=>{const r=ir(e),n=lr(),{files:o}=l.exports.useContext(P);return(s=void 0)=>{s||(s=o[0]);let i=r;return i.endsWith(s.name)||(i=`${i}/${s.name}`),n(i,t)}};function ur(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(o){o(r)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,r)})}}}const Me=ur();function Ke(e){if(!e)return"-";const t=1024;return e<t?e+"B":e<Math.pow(t,2)?(e/t).toFixed(2)+"K":e<Math.pow(t,3)?(e/Math.pow(t,2)).toFixed(2)+"M":e<Math.pow(t,4)?(e/Math.pow(t,3)).toFixed(2)+"G":(e/Math.pow(t,4)).toFixed(2)+"T"}const Ge=(...e)=>e.join("/").replace(/\/{2,}/g,"/");let Je=new Date().valueOf(),Xe=0;const dr=l.exports.forwardRef((e,t)=>{l.exports.useImperativeHandle(t,()=>({upload:()=>{i(0),document.querySelector("#upload-input").click()}}));const{password:r}=l.exports.useContext(P),{pathname:n}=D(),o=Y(),[s,i]=l.exports.useState(50),{t:f}=R(),{isOpen:u,onOpen:d,onClose:g}=Te(),m=ue("gray.100","gray.600"),[S,E]=l.exports.useState("Uploading");return a.createElement(_,null,a.createElement(de,{display:"none",type:"file",multiple:!0,id:"upload-input",onChange:I=>{const C=I.target.files,j=C[0];if(!C||!j)return;d();const F=new FormData;for(let h=0;h<C.length;h++)F.append("files",C[h],C[h].name);F.append("path",n),F.append("password",r),me.post("upload",F,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:h=>{if(h.lengthComputable){const M=h.loaded/h.total*100|0;console.log("complete",M),i(M);const O=new Date().valueOf(),v=(O-Je)/1e3;if(v>1){const z=(h.loaded-Xe)/v,x=(h.total-h.loaded)/z;E(`${Ke(z)}/s  (${f("about remaining")} ${Math.round(x)}${f("s")})`),Je=O,Xe=h.loaded}M===100&&E("Back-end processing")}}}).then(h=>{g();const M=document.querySelector("#upload-input");M.value="";const O=h.data;o({title:f(O.message),status:O.code===200?"success":"error",duration:3e3,isClosable:!0}),Me.emit("refresh")})}}),a.createElement(_,{zIndex:99,w:{base:"80vw",md:"40vw"},position:"fixed",bottom:"20px",right:"20px",bgColor:m,rounded:"lg",p:4,display:u?"block":"none"},a.createElement(xe,{mb:2,fontSize:20},f(S),"..."),a.createElement(wt,{hasStripe:!0,isAnimated:!0,rounded:"lg",value:s})))});function zn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#546E7A",points:"38,33 38,5 34,5 34,33 28,33 36,43 44,33"}},{tag:"g",attr:{fill:"#2196F3"},child:[{tag:"path",attr:{d:"M16.8,17.2h-5.3l-1.1,3H6.9L12.6,5h2.9l5.7,15.2h-3.2L16.8,17.2z M12.2,14.5H16l-1.9-5.7L12.2,14.5z"}},{tag:"path",attr:{d:"M12.4,40.5H20V43H8.4v-1.9L16,30.3H8.4v-2.5h11.4v1.7L12.4,40.5z"}}]}]})(e)}function Ln(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#00ACC1",cx:"24",cy:"24",r:"20"}},{tag:"circle",attr:{fill:"#eee",cx:"24",cy:"24",r:"16"}},{tag:"rect",attr:{x:"23",y:"11",width:"2",height:"13"}},{tag:"rect",attr:{x:"26.1",y:"22.7",transform:"matrix(-.707 .707 -.707 -.707 65.787 27.25)",width:"2.3",height:"9.2"}},{tag:"circle",attr:{cx:"24",cy:"24",r:"2"}},{tag:"circle",attr:{fill:"#00ACC1",cx:"24",cy:"24",r:"1"}}]})(e)}function $n(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#1565C0"},child:[{tag:"polygon",attr:{points:"24,37.1 13,24 35,24"}},{tag:"rect",attr:{x:"20",y:"4",width:"8",height:"4"}},{tag:"rect",attr:{x:"20",y:"10",width:"8",height:"4"}},{tag:"rect",attr:{x:"20",y:"16",width:"8",height:"11"}},{tag:"rect",attr:{x:"6",y:"40",width:"36",height:"4"}}]}]})(e)}function Hn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#B3E5FC",cx:"24",cy:"30",r:"15"}},{tag:"g",attr:{fill:"#1565C0"},child:[{tag:"polygon",attr:{points:"24,38.7 15,28 33,28"}},{tag:"rect",attr:{x:"21",y:"5",width:"6",height:"26"}}]}]})(e)}function Dn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#1976D2"},child:[{tag:"path",attr:{d:"M38,13h-3c-5.5,0-10,4.5-10,10s4.5,10,10,10h3c5.5,0,10-4.5,10-10S43.5,13,38,13z M38,29h-3 c-3.3,0-6-2.7-6-6s2.7-6,6-6h3c3.3,0,6,2.7,6,6S41.3,29,38,29z"}},{tag:"path",attr:{d:"M13,13h-3C4.5,13,0,17.5,0,23s4.5,10,10,10h3c5.5,0,10-4.5,10-10S18.5,13,13,13z M13,29h-3 c-3.3,0-6-2.7-6-6s2.7-6,6-6h3c3.3,0,6,2.7,6,6S16.3,29,13,29z"}}]},{tag:"path",attr:{fill:"#42A5F5",d:"M33,21H15c-1.1,0-2,0.9-2,2s0.9,2,2,2h18c1.1,0,2-0.9,2-2S34.1,21,33,21z"}}]})(e)}function Nn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#546E7A",points:"38,33 38,5 34,5 34,33 28,33 36,43 44,33"}},{tag:"g",attr:{fill:"#2196F3"},child:[{tag:"path",attr:{d:"M16.4,20h-3V8.6L9.9,9.7V7.3L16,5.1h0.3V20z"}},{tag:"path",attr:{d:"M19.4,43H9.2v-2l4.8-5.1c0.4-0.4,0.7-0.8,0.9-1.1c0.2-0.3,0.5-0.6,0.6-0.9c0.2-0.3,0.3-0.5,0.3-0.8 c0.1-0.2,0.1-0.5,0.1-0.7c0-0.7-0.2-1.2-0.5-1.6c-0.3-0.4-0.8-0.6-1.4-0.6c-0.3,0-0.7,0.1-0.9,0.2c-0.3,0.1-0.5,0.3-0.7,0.5 c-0.2,0.2-0.3,0.5-0.4,0.8s-0.1,0.6-0.1,1h-3c0-0.7,0.1-1.3,0.4-1.9c0.2-0.6,0.6-1.1,1-1.6c0.5-0.4,1-0.8,1.6-1.1 c0.6-0.3,1.4-0.4,2.2-0.4c0.8,0,1.5,0.1,2.1,0.3c0.6,0.2,1.1,0.5,1.5,0.8s0.7,0.8,0.9,1.3s0.3,1.1,0.3,1.8c0,0.5-0.1,1-0.2,1.4 S18.3,34.5,18,35s-0.6,0.9-1,1.4c-0.4,0.5-0.9,1-1.4,1.5L13,40.6h6.4V43z"}}]}]})(e)}function Un(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#4CAF50",cx:"24",cy:"24",r:"21"}},{tag:"g",attr:{fill:"#fff"},child:[{tag:"rect",attr:{x:"21",y:"14",width:"6",height:"20"}},{tag:"rect",attr:{x:"14",y:"21",width:"20",height:"6"}}]}]})(e)}function Vn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#1565C0"},child:[{tag:"path",attr:{d:"M13,13c0-3.3,2.7-6,6-6h10c3.3,0,6,2.7,6,6h4c0-5.5-4.5-10-10-10H19C13.5,3,9,7.5,9,13v11.2h4V13z"}},{tag:"polygon",attr:{points:"4.6,22 11,30.4 17.4,22"}}]},{tag:"g",attr:{fill:"#1565C0"},child:[{tag:"path",attr:{d:"M35,35c0,3.3-2.7,6-6,6H19c-3.3,0-6-2.7-6-6H9c0,5.5,4.5,10,10,10h10c5.5,0,10-4.5,10-10V23h-4V35z"}},{tag:"polygon",attr:{points:"30.6,26 37,17.6 43.4,26"}}]}]})(e)}function fr(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#616161"},child:[{tag:"rect",attr:{x:"34.6",y:"28.1",transform:"matrix(.707 -.707 .707 .707 -15.154 36.586)",width:"4",height:"17"}},{tag:"circle",attr:{cx:"20",cy:"20",r:"16"}}]},{tag:"rect",attr:{x:"36.2",y:"32.1",transform:"matrix(.707 -.707 .707 .707 -15.839 38.239)",fill:"#37474F",width:"4",height:"12.3"}},{tag:"circle",attr:{fill:"#64B5F6",cx:"20",cy:"20",r:"13"}},{tag:"path",attr:{fill:"#BBDEFB",d:"M26.9,14.2c-1.7-2-4.2-3.2-6.9-3.2s-5.2,1.2-6.9,3.2c-0.4,0.4-0.3,1.1,0.1,1.4c0.4,0.4,1.1,0.3,1.4-0.1 C16,13.9,17.9,13,20,13s4,0.9,5.4,2.5c0.2,0.2,0.5,0.4,0.8,0.4c0.2,0,0.5-0.1,0.6-0.2C27.2,15.3,27.2,14.6,26.9,14.2z"}}]})(e)}function qn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#607D8B",d:"M44.7,11L36,19.6c0,0-2.6,0-5.2-2.6s-2.6-5.2-2.6-5.2l8.7-8.7c-4.9-1.2-10.8,0.4-14.4,4 c-5.4,5.4-0.6,12.3-2,13.7C12.9,28.7,5.1,34.7,4.9,35c-2.3,2.3-2.4,6-0.2,8.2c2.2,2.2,5.9,2.1,8.2-0.2c0.3-0.3,6.7-8.4,14.2-15.9 c1.4-1.4,8,3.7,13.6-1.8C44.2,21.7,45.9,15.9,44.7,11z M9.4,41.1c-1.4,0-2.5-1.1-2.5-2.5C6.9,37.1,8,36,9.4,36 c1.4,0,2.5,1.1,2.5,2.5C11.9,39.9,10.8,41.1,9.4,41.1z"}}]})(e)}function Wn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FF6F00",d:"M38.7,11.9l-3.1,2.5c2.2,2.7,3.4,6.1,3.4,9.5c0,8.3-6.7,15-15,15c-0.9,0-1.9-0.1-2.8-0.3l-0.7,3.9 c1.2,0.2,2.4,0.3,3.5,0.3c10.5,0,19-8.5,19-19C43,19.6,41.5,15.3,38.7,11.9z"}},{tag:"polygon",attr:{fill:"#FF6F02",points:"31,8 42.9,9.6 33.1,19.4"}},{tag:"path",attr:{fill:"#FF6F00",d:"M24,5C13.5,5,5,13.5,5,24c0,4.6,1.6,9,4.6,12.4l3-2.6C10.3,31.1,9,27.6,9,24c0-8.3,6.7-15,15-15 c0.9,0,1.9,0.1,2.8,0.3l0.7-3.9C26.4,5.1,25.2,5,24,5z"}},{tag:"polygon",attr:{fill:"#FF6F02",points:"17,40 5.1,38.4 14.9,28.6"}}]})(e)}function Kn(e){return k({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"g",attr:{fill:"#3F51B5"},child:[{tag:"polygon",attr:{points:"17.8,18.1 10.4,25.4 6.2,21.3 4,23.5 10.4,29.9 20,20.3"}},{tag:"polygon",attr:{points:"17.8,5.1 10.4,12.4 6.2,8.3 4,10.5 10.4,16.9 20,7.3"}},{tag:"polygon",attr:{points:"17.8,31.1 10.4,38.4 6.2,34.3 4,36.5 10.4,42.9 20,33.3"}}]},{tag:"g",attr:{fill:"#90CAF9"},child:[{tag:"rect",attr:{x:"24",y:"22",width:"20",height:"4"}},{tag:"rect",attr:{x:"24",y:"9",width:"20",height:"4"}},{tag:"rect",attr:{x:"24",y:"35",width:"20",height:"4"}}]}]})(e)}const pr=e=>{const t=l.exports.useRef(null),{t:r}=R(),{getSetting:n}=l.exports.useContext(P),[o,s]=l.exports.useState(""),i=()=>{f.push(`?s=${o}`)},f=Ae();return l.exports.useEffect(()=>{var g;e.isSearch&&((g=t.current)==null||g.focus());const u=m=>{["k","K"].includes(m.key)&&m.ctrlKey&&(e.setIsSearch(!e.isSearch),m.preventDefault())};n("enable search")==="true"&&document.addEventListener("keydown",u);const d=m=>{e.setIsSearch(!1)};return document.addEventListener("click",d),()=>{document.removeEventListener("keydown",u),document.removeEventListener("click",d)}},[e.isSearch]),n("enable search")!=="true"?null:a.createElement(N,{spacing:2,onClick:u=>{u.stopPropagation()}},a.createElement(de,{display:e.isSearch?"block":"none",value:o,onKeyUp:u=>{u.key==="Enter"&&i()},onChange:u=>{s(u.target.value)},ref:t}),a.createElement(V,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:r("Search files")},a.createElement(q,{boxSize:7,cursor:"pointer",onClick:()=>{e.isSearch?i():e.setIsSearch(!0)},as:fr})))},gr=()=>{const{t:e}=R(),t=Se(),r=Y(),{show:n,setShow:o,type:s,getSetting:i,files:f,multiSelect:u,selectFiles:d,meta:g,loggedIn:m}=l.exports.useContext(P),S=i("logo"),E=ue(S.split(",").shift(),S.split(",").pop()),I=l.exports.useRef(null),[C,j]=l.exports.useState(!1);return a.createElement(fe,{className:"header",px:"2",py:"2",justify:"space-between",w:"full"},a.createElement(W,{to:"/",className:"logo"},E.includes("http")?a.createElement(vt,{fallback:a.createElement(Z,{color:i("icon color")||"#1890ff"}),rounded:"lg",h:"44px",w:"auto",src:E}):a.createElement(xe,null,E)),a.createElement(N,{className:"buttons",spacing:"2"},["folder","search"].includes(s)&&a.createElement(pr,{isSearch:C,setIsSearch:j}),!C&&a.createElement(yt,{in:!C,offsetX:"20px",offsetY:0},a.createElement(N,{spacing:"2"},s==="file"&&a.createElement(V,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:e("Download")},a.createElement(q,{cursor:"pointer",boxSize:6,as:It,onClick:()=>{if(s==="file"){let F=t();window.open(F,"_blank");return}}})),s==="folder"&&!i("no upload").split(",").includes(g.driver)&&(g.upload||m)&&a.createElement(_,null,a.createElement(V,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:e("Upload file")},a.createElement(q,{cursor:"pointer",boxSize:6,as:Bt,onClick:()=>{I.current.upload()}})),a.createElement(dr,{ref:I})),s!=="error"&&a.createElement(V,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:e("Copy direct link")},a.createElement(q,{cursor:"pointer",boxSize:6,as:or,onClick:()=>{let F="";if(s==="file")F=t();else{let h=f;u&&(h=d),F=h.filter(M=>M.type!==1).map(M=>t(M)).join(`
`)}rr(F),r({title:e("Copied"),status:"success",duration:3e3,isClosable:!0})}})),a.createElement(V,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:e("switch to layout view",{layout:e(n==="list"?"grid":"list")})},a.createElement(q,{boxSize:6,cursor:"pointer",onClick:()=>{o(n==="list"?"grid":"list"),localStorage.setItem("show",n==="list"?"grid":"list")},as:n==="list"?Rt:Tt}))))))},mr=()=>{const{t:e}=R(),{getSetting:t}=l.exports.useContext(P);return a.createElement(K,{py:"4",className:"footer"},a.createElement(pe,null,a.createElement(N,{spacing:"2",className:"line0"},a.createElement(ze,{isExternal:!0,href:"https://github.com/Xhofe/alist"},e("Powered by {{project}}",{project:"Alist"})),a.createElement("span",null,"|"),a.createElement(W,{to:"/@manage"},e("Manage"))),t("site beian")&&a.createElement(ze,{className:"line1",isExternal:!0,href:"https://beian.miit.gov.cn/"},t("site beian"))))},hr=()=>{const e=D(),{t}=R();return a.createElement(bt,{spacing:"1",className:"nav",w:"full",px:"2"},a.createElement(Le,null,a.createElement($e,{_hover:{textDecoration:"none",bg:"rgba(132,133,141,0.18)"},p:"1",rounded:"lg",as:W,to:"/"},At("home emoji"),t("Home"))),e.pathname.slice(1).split("/").map((r,n)=>{const o=n===e.pathname.split("/").length-2,s=e.pathname.split("/").slice(0,n+2).join("/");return a.createElement(Le,{key:s,isCurrentPage:o},a.createElement($e,{isCurrentPage:o,wordBreak:"break-word",as:o?void 0:W,to:encodeURI(s),_hover:{textDecoration:"none",bg:"rgba(132,133,141,0.18)"},p:"1",rounded:"lg"},r))}))},wr=({msg:e})=>{const{t}=R();return a.createElement(_,{className:"error",textAlign:"center",py:10,px:6},a.createElement(xe,{display:"inline-block",size:"xl"},t("ERROR")),a.createElement(Q,{fontSize:"18px",my:3},t(e)),a.createElement(W,{to:"/"},a.createElement(ge,{variant:"solid"},t("Back Home"))))};function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ye(Object(r),!0).forEach(function(n){vr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,s;for(s=0;s<n.length;s++)o=n[s],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function br(e,t){if(e==null)return{};var r=yr(e,t),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function xr(e,t){return Er(e)||Cr(e,t)||Sr(e,t)||Mr()}function Er(e){if(Array.isArray(e))return e}function Cr(e,t){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,o=!1,s=void 0;try{for(var i=e[Symbol.iterator](),f;!(n=(f=i.next()).done)&&(r.push(f.value),!(t&&r.length===t));n=!0);}catch(u){o=!0,s=u}finally{try{!n&&i.return!=null&&i.return()}finally{if(o)throw s}}return r}}function Sr(e,t){if(!!e){if(typeof e=="string")return Qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qe(e,t)}}function Qe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?et(Object(r),!0).forEach(function(n){Fr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Or(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return t.reduceRight(function(o,s){return s(o)},n)}}function te(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var i=arguments.length,f=new Array(i),u=0;u<i;u++)f[u]=arguments[u];return t.apply(r,[].concat(o,f))}}}function he(e){return{}.toString.call(e).includes("Object")}function kr(e){return!Object.keys(e).length}function re(e){return typeof e=="function"}function jr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _r(e,t){return he(t)||A("changeType"),Object.keys(t).some(function(r){return!jr(e,r)})&&A("changeField"),t}function Pr(e){re(e)||A("selectorType")}function Ir(e){re(e)||he(e)||A("handlerType"),he(e)&&Object.values(e).some(function(t){return!re(t)})&&A("handlersType")}function Br(e){e||A("initialIsRequired"),he(e)||A("initialType"),kr(e)&&A("initialContent")}function Rr(e,t){throw new Error(e[t]||e.default)}var Tr={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},A=te(Rr)(Tr),we={changes:_r,selector:Pr,handler:Ir,initial:Br};function Ar(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};we.initial(e),we.handler(t);var r={current:e},n=te($r)(r,t),o=te(Lr)(r),s=te(we.changes)(e),i=te(zr)(r);function f(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(g){return g};return we.selector(d),d(r.current)}function u(d){Or(n,o,s,i)(d)}return[f,u]}function zr(e,t){return re(t)?t(e.current):t}function Lr(e,t){return e.current=tt(tt({},e.current),t),t}function $r(e,t,r){return re(t)?t(e.current):Object.keys(r).forEach(function(n){var o;return(o=t[n])===null||o===void 0?void 0:o.call(t,e.current[n])}),r}var Hr={create:Ar},Dr={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs"}};function Nr(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var i=arguments.length,f=new Array(i),u=0;u<i;u++)f[u]=arguments[u];return t.apply(r,[].concat(o,f))}}}function Ur(e){return{}.toString.call(e).includes("Object")}function Vr(e){return e||nt("configIsRequired"),Ur(e)||nt("configType"),e.urls?(qr(),{paths:{vs:e.urls.monacoBase}}):e}function qr(){console.warn(rt.deprecation)}function Wr(e,t){throw new Error(e[t]||e.default)}var rt={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},nt=Nr(Wr)(rt),Kr={config:Vr},Gr=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(o){return r.reduceRight(function(s,i){return i(s)},o)}};function at(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],at(e[r],t[r]))}),Ze(Ze({},e),t)}var Jr={type:"cancelation",msg:"operation is manually canceled"};function Fe(e){var t=!1,r=new Promise(function(n,o){e.then(function(s){return t?o(Jr):n(s)}),e.catch(o)});return r.cancel=function(){return t=!0},r}var Xr=Hr.create({config:Dr,isInitialized:!1,resolve:null,reject:null,monaco:null}),ot=xr(Xr,2),ne=ot[0],ve=ot[1];function Yr(e){var t=Kr.config(e),r=t.monaco,n=br(t,["monaco"]);ve(function(o){return{config:at(o.config,n),monaco:r}})}function Zr(){var e=ne(function(t){var r=t.monaco,n=t.isInitialized;return{monaco:r,isInitialized:n}});if(!e.isInitialized){if(ve({isInitialized:!0}),e.monaco)return Fe(Promise.resolve(e.monaco));if(window.monaco&&window.monaco.editor)return st(window.monaco),Fe(Promise.resolve(window.monaco));Gr(Qr,tn)(rn)}return Fe(an)}function Qr(e){return document.body.appendChild(e)}function en(e){var t=document.createElement("script");return e&&(t.src=e),t}function tn(e){var t=ne(function(n){var o=n.config,s=n.reject;return{config:o,reject:s}}),r=en("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function rn(){var e=ne(function(r){var n=r.config,o=r.resolve,s=r.reject;return{config:n,resolve:o,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){st(r),e.resolve(r)},function(r){e.reject(r)})}function st(e){ne().monaco||ve({monaco:e})}function nn(){return ne(function(e){var t=e.monaco;return t})}var an=new Promise(function(e,t){return ve({resolve:e,reject:t})}),on={config:Yr,init:Zr,__getMonacoInstance:nn};function Oe(){return Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oe.apply(this,arguments)}const sn={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};function cn({content:e}){return a.createElement("div",{style:sn},e)}const ke={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function it({width:e,height:t,isEditorReady:r,loading:n,_ref:o,className:s,wrapperProps:i}){return a.createElement("section",Oe({style:Re(H({},ke.wrapper),{width:e,height:t})},i),!r&&a.createElement(cn,{content:n}),a.createElement("div",{ref:o,style:H(H({},ke.fullWidth),!r&&ke.hide),className:s}))}it.propTypes={width:c.oneOfType([c.number,c.string]).isRequired,height:c.oneOfType([c.number,c.string]).isRequired,loading:c.oneOfType([c.element,c.string]).isRequired,isEditorReady:c.bool.isRequired,className:c.string,wrapperProps:c.object};var ln=l.exports.memo(it);function un(e){l.exports.useEffect(e,[])}function G(e,t,r=!0){const n=l.exports.useRef(!0);l.exports.useEffect(n.current||!r?()=>{n.current=!1}:e,t)}function je(){}function ct(e,t,r,n){return dn(e,n)||fn(e,t,r,n)}function dn(e,t){return e.editor.getModel(lt(e,t))}function fn(e,t,r,n){return e.editor.createModel(t,r,n&&lt(e,n))}function lt(e,t){return e.Uri.parse(t)}function pn(e){return e===void 0}c.string,c.string,c.string,c.string,c.string,c.string,c.string,c.bool,c.bool,c.string,c.oneOfType([c.element,c.string]),c.object,c.oneOfType([c.number,c.string]),c.oneOfType([c.number,c.string]),c.string,c.object,c.func,c.func;function gn(e){const t=l.exports.useRef();return l.exports.useEffect(()=>{t.current=e},[e]),t.current}const ye=new Map;function _e({defaultValue:e,defaultLanguage:t,defaultPath:r,value:n,language:o,path:s,theme:i,line:f,loading:u,options:d,overrideServices:g,saveViewState:m,keepCurrentModel:S,width:E,height:I,className:C,wrapperProps:j,beforeMount:F,onMount:h,onChange:M,onValidate:O}){const[v,oe]=l.exports.useState(!1),[z,se]=l.exports.useState(!0),x=l.exports.useRef(null),w=l.exports.useRef(null),J=l.exports.useRef(null),L=l.exports.useRef(h),ie=l.exports.useRef(F),X=l.exports.useRef(null),$=l.exports.useRef(n),ce=gn(s);un(()=>{const p=on.init();return p.then(b=>(x.current=b)&&se(!1)).catch(b=>(b==null?void 0:b.type)!=="cancelation"&&console.error("Monaco initialization: error:",b)),()=>w.current?B():p.cancel()}),G(()=>{const p=ct(x.current,e||n,t||o,s);p!==w.current.getModel()&&(m&&ye.set(ce,w.current.saveViewState()),w.current.setModel(p),m&&w.current.restoreViewState(ye.get(s)))},[s],v),G(()=>{w.current.updateOptions(d)},[d],v),G(()=>{w.current.getOption(x.current.editor.EditorOption.readOnly)?w.current.setValue(n):n!==w.current.getValue()&&(w.current.executeEdits("",[{range:w.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),w.current.pushUndoStop())},[n],v),G(()=>{x.current.editor.setModelLanguage(w.current.getModel(),o)},[o],v),G(()=>{pn(f)||w.current.revealLine(f)},[f],v),G(()=>{x.current.editor.setTheme(i)},[i],v);const y=l.exports.useCallback(()=>{ie.current(x.current);const p=s||r,b=ct(x.current,n||e,t||o,p);w.current=x.current.editor.create(J.current,H({model:b,automaticLayout:!0},d),g),m&&w.current.restoreViewState(ye.get(p)),x.current.editor.setTheme(i),oe(!0)},[e,t,r,n,o,s,d,g,m,i]);l.exports.useEffect(()=>{v&&L.current(w.current,x.current)},[v]),l.exports.useEffect(()=>{!z&&!v&&y()},[z,v,y]),$.current=n,l.exports.useEffect(()=>{if(v&&M){var p,b;(p=X.current)===null||p===void 0||p.dispose(),X.current=(b=w.current)===null||b===void 0?void 0:b.onDidChangeModelContent(T=>{const U=w.current.getValue();$.current!==U&&M(U,T)})}},[v,M]),l.exports.useEffect(()=>{if(v){const p=x.current.editor.onDidChangeMarkers(b=>{var T;const U=(T=w.current.getModel())===null||T===void 0?void 0:T.uri;if(U&&b.find(be=>be.path===U.path)){const be=x.current.editor.getModelMarkers({resource:U});O==null||O(be)}});return()=>{p==null||p.dispose()}}},[v,O]);function B(){var p;if((p=X.current)===null||p===void 0||p.dispose(),S)m&&ye.set(s,w.current.saveViewState());else{var b;(b=w.current.getModel())===null||b===void 0||b.dispose()}w.current.dispose()}return a.createElement(ln,{width:E,height:I,isEditorReady:v,loading:u,_ref:J,className:C,wrapperProps:j})}_e.propTypes={defaultValue:c.string,defaultPath:c.string,defaultLanguage:c.string,value:c.string,language:c.string,path:c.string,theme:c.string,line:c.number,loading:c.oneOfType([c.element,c.string]),options:c.object,overrideServices:c.object,saveViewState:c.bool,keepCurrentModel:c.bool,width:c.oneOfType([c.number,c.string]),height:c.oneOfType([c.number,c.string]),className:c.string,wrapperProps:c.object,beforeMount:c.func,onMount:c.func,onChange:c.func,onValidate:c.func};_e.defaultProps={theme:"light",loading:"Loading...",options:{},overrideServices:{},saveViewState:!0,keepCurrentModel:!1,width:"100%",height:"100%",wrapperProps:{},beforeMount:je,onMount:je,onValidate:je};var mn=l.exports.memo(_e);const hn=-1,wn=[],ut=({file:e})=>{const t=ue("light","dark"),{t:r}=R(),n=Y(),{pathname:o}=D(),[s,i]=a.useState("");let f=Se(!0)(e);const u=()=>{Ee.get(f).then(g=>le(void 0,null,function*(){i(g.data)}))},d=()=>le(void 0,null,function*(){const g=o.substring(0,o.lastIndexOf("/")||1),m=new FormData;m.append("files",new Blob([s]),e.name),m.append("path",g),me.post("upload",m,{headers:{"Content-Type":"multipart/form-data"}}).then(S=>{const E=S.data;n({title:r(E.message),status:E.code===200?"success":"error",duration:3e3,isClosable:!0})})});return a.useEffect(()=>{u()},[]),a.createElement(_,null,a.createElement(mn,{height:"70vh",value:s,path:e.name,theme:t==="light"?"light":"vs-dark",onChange:g=>i(g)}),a.createElement(fe,{m:"2"},a.createElement(xt,null),a.createElement(ge,{mt:"5",onClick:d},r("Save"))))};var Gn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:hn,exts:wn,default:ut});const vn=5,yn=[],dt=({file:e,readme:t})=>{const[r,n]=a.useState(""),[o,s]=a.useState(""),{getSetting:i,loggedIn:f}=l.exports.useContext(P);let u=Se(!0)(e);const d=e.name.endsWith(".html"),[g,m]=a.useState("preview"),S=()=>{t&&e.type===-1&&(u=e.url),Ee.get(u,{responseType:"blob"}).then(E=>le(void 0,null,function*(){const I=E.data;let C=yield I.text();C.includes("\uFFFD")&&(C=new TextDecoder("gbk").decode(yield I.arrayBuffer())),d&&s(C),e.name.endsWith(".md")?n(C):n("```"+e.name.split(".").pop()+`
`+C+"\n```")}))};return l.exports.useEffect(()=>(S(),()=>{n("")}),[]),r?a.createElement(_,{w:"full"},a.createElement(N,null,d&&a.createElement(He,{display:"flex",alignItems:"center",width:"auto",m:"1"},a.createElement(De,{htmlFor:"render",mb:"0"},"Render?"),a.createElement(Ne,{id:"render",isChecked:g==="render",onChange:()=>{m(g==="render"?"preview":"render")}})),!t&&f&&a.createElement(He,{display:"flex",alignItems:"center",width:"auto",m:"1"},a.createElement(De,{htmlFor:"render",mb:"0"},"Edit?"),a.createElement(Ne,{id:"edit",isChecked:g==="edit",onChange:()=>{m(g==="edit"?"preview":"edit")}}))),g==="render"?a.createElement("iframe",{srcDoc:o,style:{width:"100%",borderRadius:"0.75rem",boxShadow:"#00000031 0px 1px 10px 5px",minHeight:"70vh"}}):g==="edit"?a.createElement(ut,{file:e}):a.createElement(_,{className:"markdown-body"},a.createElement(zt,null,r))):a.createElement(K,{w:"full"},a.createElement(Z,{color:i("icon color"),size:"xl"}))};var Jn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:vn,exts:yn,default:dt});const bn={"dmg,ipa,plist":Wt,"exe,msi":Kt,"zip,gz,rar,7z,tar,jar,xz":Gt,apk:Jt,db:Xt,md:Yt,epub:Zt,iso:Qt,m3u8:Ue},xn=(e,t)=>{if(e!==1){for(const[r,n]of Object.entries(bn))if(r.split(",").includes(t.toLowerCase()))return n}switch(e){case 1:return sr;case 2:return t==="doc"||t==="docx"?Nt:t==="xls"||t==="xlsx"?Ut:t==="ppt"||t==="pptx"?Vt:qt;case 3:return Ue;case 4:return Dt;case 5:return Ht;case 6:return $t;default:return Lt}},En=e=>{const{getSetting:t}=l.exports.useContext(P);return a.createElement(_,{w:"full"},a.createElement(V,{placement:"bottom-start",label:Ge(e.path,e.name)},a.createElement(Et,{className:"result",p:"2",w:"full",rounded:"lg",transition:"all 0.3s",_hover:{transform:"scale(1.01)",bgColor:"rgba(132,133,141,0.18)"}},a.createElement(Ct,{as:W,to:encodeURI(Ge(e.path,e.name))},a.createElement(N,{spacing:2},a.createElement(fe,{className:"result-name",align:"center",w:{base:3/4,md:"50%"}},a.createElement(q,{color:t("icon color"),boxSize:6,as:xn(e.type,e.name.split(".").pop()||""),mr:2}),a.createElement(Q,{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:"md"},e.name)),a.createElement(Q,{className:"result-size",w:{base:1/4,md:1/6},textAlign:"right"},Ke(e.size)),a.createElement(Q,{className:"result-path",w:{base:0,md:1/3},display:{base:"none",md:"unset"},textAlign:"right"},e.path))))))},Cn=()=>{const e=D(),[t,r]=l.exports.useState(!0),{getSetting:n}=l.exports.useContext(P),o=Y(),[s,i]=l.exports.useState([]),f=()=>{const d=new URLSearchParams(e.search),g=e.pathname,m=d.get("s");!m||(r(!0),me.post("search",{path:g,keyword:m}).then(S=>{r(!1);const E=S.data;E.code===200?i(E.data):o({title:E.message,status:"error",duration:3e3,isClosable:!0})}))};l.exports.useEffect(()=>{f()},[e.search]);const{t:u}=R();return t?a.createElement(K,{w:"full",py:"4"},a.createElement(Z,{color:n("icon color")||"#1890ff",size:"xl"})):a.createElement(pe,{className:"results-box",w:"full"},a.createElement(N,{className:"results-title",w:"full",p:"2"},[{name:"name",base:2/3,md:"50%",textAlign:"left"},{name:"size",base:1/3,md:1/6,textAlign:"right"},{name:"path",base:0,md:1/3,textAlign:"right"}].map(d=>a.createElement(fe,{w:{base:d.base,md:d.md},key:d.name,align:"center"},a.createElement(Q,{w:"full",className:`results-title-${d.name}`,fontSize:"sm",fontWeight:"bold",color:"gray.500",textAlign:d.textAlign,cursor:"pointer",display:d.name==="path"?{base:"none",md:"unset"}:"unset"},u(d.name))))),s.map(d=>a.createElement(En,H({key:d.name},d))))},Sn=l.exports.lazy(()=>Ve(()=>import(""+(window.__dynamicImportHandler__||function(e){return e})("./index.8dd750e1.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/index.8dd750e1.js","assets/index.884c354a.css","assets/vendor.eb3334f9.js","assets/index.esm.2832c82c.js","assets/index.esm.5483c5f7.css","assets/index.13b3a8f8.js","assets/clsx.m.c6439cc2.js","assets/copy-clip.08e8f9de.js"]))),Mn=l.exports.lazy(()=>Ve(()=>import(""+(window.__dynamicImportHandler__||function(e){return e})("./file.33ad7da1.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/file.33ad7da1.js","assets/file.450b80be.css","assets/vendor.eb3334f9.js","assets/index.efb1e4d4.js","assets/clsx.m.c6439cc2.js","assets/index.esm.2832c82c.js","assets/index.esm.5483c5f7.css","assets/index.13b3a8f8.js","assets/useTitle.64d272f6.js","assets/copy-clip.08e8f9de.js"]))),Fn=()=>{const e=ue("white","gray.700");R();const{getSetting:t,setPassword:r,password:n,settingLoaded:o,type:s,msg:i,files:f,meta:u}=l.exports.useContext(P),d=l.exports.useMemo(()=>{if(s==="file")return;const g={name:"README.md",size:0,type:-1,driver:"local",updated_at:"",thumbnail:"",url:u.readme};if(u.readme)return g;const m=f.find(S=>S.name.toLowerCase()==="readme.md");if(m)return m;if(t("global readme url"))return g.url=t("global readme url"),g},[f,s,o]);return a.createElement(K,{className:"index-box",w:"full"},a.createElement(er,{list:!0}),a.createElement(pe,{className:"root-box",w:{base:"95%",lg:"980px"}},a.createElement(gr,null),a.createElement(hr,null),a.createElement(_,{className:"main-box",rounded:"xl",shadow:"lg",bgColor:e,w:"full"},s==="loading"?a.createElement(K,{w:"full",py:"4"},a.createElement(Z,{color:t("icon color")||"#1890ff",size:"xl"})):a.createElement(_,{className:"content-box",w:"full",p:"2"},a.createElement(l.exports.Suspense,{fallback:a.createElement(K,{h:"full"},a.createElement(Z,{color:t("icon color")||"#1890ff",size:"xl"}))},s==="folder"||s==="nexting"?a.createElement(Sn,null):s==="file"?a.createElement(Mn,null):s==="search"?a.createElement(Cn,null):a.createElement(wr,{msg:i})))),s==="folder"&&d&&a.createElement(_,{className:"readme-box",rounded:"xl",shadow:"lg",bgColor:e,w:"full",p:"4"},a.createElement(dt,{file:d,readme:!0})),a.createElement(mr,null)))};const On=(e,t)=>{const r=l.exports.useRef(!1);l.exports.useEffect(()=>{r.current?e():r.current=!0},t)},kn=e=>{const[t,r]=l.exports.useState({current:!1}),n=l.exports.useCallback(()=>{r({current:!0})},[t]);return l.exports.useEffect(()=>{t.current===!0&&r({current:!1})},[t]),l.exports.useEffect(()=>{t.current&&e()}),n};let Pe=!1,ae=!1;const jn=e=>{const{type:t,setType:r,setSelectFiles:n,setFiles:o,setLastFiles:s,files:i,setMsg:f,sort:u,userName:d,setUserName:g,password:m,setPassword:S,setMeta:E,getSetting:I,setPage:C,page:j,settingLoaded:F}=l.exports.useContext(P),{t:h}=R(),M=Ae(),O=D(),v=Y(),{path:oe,cancelPath:z}=ar(),{isOpen:se,onClose:x,onOpen:w}=Te(),J=a.useRef(),L=kn(()=>{if(!F||ce())return;z(),console.log("refresh"),console.log(j);const y=I("load type");t==="folder"&&s(i),j.page_num===1||y==="all"||y==="pagination"?(r("loading"),n([]),o([])):r("nexting"),oe().then(B=>{const p=B.data;f(p.message),p.code===200?(p.data.type==="file"?o(p.data.files):j.page_num===1||y==="all"||y==="pagination"?o(ie(p.data.files)):o([...i,...p.data.files]),E(p.data.meta),r(p.data.type)):(p.code===401&&ae&&(v({title:h(p.message),status:"error",duration:3e3,isClosable:!0}),ae=!1),p.code===1001&&(v({title:h(p.message),status:"warning",duration:3e3,isClosable:!0}),M.push("/@manage")),p.code===401?r("unauthorized"):r("error"))})}),ie=y=>{const{orderBy:B,reverse:p}=u;return B?y.sort((b,T)=>b[B]<T[B]?p?1:-1:b[B]>T[B]?p?-1:1:0):y},X=()=>{if(Pe){Pe=!1;return}L()},$=()=>{j.page_num!==1&&(Pe=!0,C({page_num:1,page_size:j.page_size})),L()};l.exports.useEffect(()=>{const y=ie(i);o([...y])},[u]),l.exports.useEffect(()=>($(),Me.on("refresh",$),()=>{Me.off("refresh",$)}),[O.pathname]),On(()=>{X()},[j]);const ce=()=>new URLSearchParams(O.search).get("s")?(r("search"),!0):!1;return l.exports.useEffect(()=>{ce()||$()},[O.search]),l.exports.useEffect(()=>{t==="unauthorized"&&w()},[t]),a.createElement(a.Fragment,null,a.createElement(a.Fragment,H({},e)),a.createElement(St,{initialFocusRef:J,isOpen:se,onClose:()=>{x()}},a.createElement(Mt,null),a.createElement(Ft,null,a.createElement(Ot,null,h("Login")),a.createElement(kt,null),a.createElement(jt,{pb:6},a.createElement(pe,{direction:["column"],spacing:"24px",align:"stretch"},a.createElement(_,{h:"40px"},a.createElement(de,{type:"text",placeholder:h("userName"),ref:J,value:d,onChange:y=>{g(y.target.value)},onKeyUp:y=>{y.key==="Enter"&&(localStorage.setItem("userName",d),ae=!0,L(),x())}})),a.createElement(_,{h:"40px"},a.createElement(de,{type:"password",placeholder:h("password"),value:m,onChange:y=>{S(y.target.value)},onKeyUp:y=>{y.key==="Enter"&&(localStorage.setItem("password",m),ae=!0,L(),x())}})))),a.createElement(_t,null,a.createElement(ge,{onClick:()=>{localStorage.setItem("userName",d),localStorage.setItem("password",m),ae=!0,L(),x()},mr:3},h("Ok")),a.createElement(ge,{colorScheme:"gray",onClick:()=>{M.goBack(),x()}},h("Cancel"))))))},_n=()=>a.createElement(tr,null,a.createElement(jn,null,a.createElement(Fn,null)));var Xn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_n});export{Un as F,sr as I,Gn as _,lr as a,ar as b,Me as c,Wn as d,Se as e,Kn as f,qn as g,Hn as h,$n as i,Dn as j,Vn as k,zn as l,We as m,Nn as n,Ln as o,Ge as p,xn as q,Ke as r,Jn as s,Xn as t,ir as u};
