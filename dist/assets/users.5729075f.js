var O=Object.defineProperty,U=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var w=(s,t,n)=>t in s?O(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,f=(s,t)=>{for(var n in t||(t={}))N.call(t,n)&&w(s,n,t[n]);if(v)for(var n of v(t))F.call(t,n)&&w(s,n,t[n]);return s},h=(s,t)=>U(s,B(t));import{g as H,h as I,R as e,j as V,r as G,l as k,o as L,G as i,aE as R,aF as X,aG as x,aH as d,aI as $,aJ as p,aK as q,aL as z,aM as J,aN as K,aO as Q,aP as W,aQ as Y,E as Z,W as _,X as ee,Y as te,Z as ae,_ as se,$ as re,V as ne,a0 as le}from"./vendor.24a792c2.js";import{b as y}from"./index.esm.284dc1ce.js";import{F as oe}from"./form-item.41e8745b.js";import"./index.8daf12b9.js";import"./index.026d1863.js";const T={id:0,userName:"",password:"",metas:Array(0),isActive:!1,dueDate:""},Ee=()=>{const s=H(),{t}=I(),[n,A]=e.useState([]),[b,D]=e.useState([]),[o,u]=e.useState(T),[g,S]=e.useState(!1),[M,C]=e.useState(!1),m=V(),E=()=>{C(!0),y.get("users").then(a=>{C(!1);const r=a.data;r.code!==200?s({title:t(r.message),status:"error",duration:3e3,isClosable:!0}):(A(r.data),C(!0),y.get("metas").then(({data:c})=>{if(C(!1),c.code!=200){s({title:t(c.message),status:"error",duration:3e3,isClosable:!0});return}D(c.data)}))})};return G.exports.useEffect(()=>{E()},[]),e.createElement(k,{w:"full"},e.createElement(L,null,e.createElement(i,{onClick:()=>{u(T),S(!1),m.onOpen()}},t("Add")),e.createElement(i,{colorScheme:"orange",isLoading:M,onClick:()=>{E()}},t("Refresh"))),e.createElement(k,{overflowX:"auto"},e.createElement(R,{w:"full"},e.createElement(X,null,e.createElement(x,null,e.createElement(d,null,t("userName")),e.createElement(d,null,t("password")),e.createElement(d,null,t("metas")),e.createElement(d,null,t("isActive")),e.createElement(d,null,t("dueDate")),e.createElement(d,null,t("operation")))),e.createElement($,null,n.map(a=>{var r;return e.createElement(x,{key:a.id},e.createElement(p,null,a.userName),e.createElement(p,null,a.password),e.createElement(p,null,((r=a.metas)==null?void 0:r.map(c=>c.path).join(", "))||""),e.createElement(p,null,a.isActive?"true":"false"),e.createElement(p,null,a.dueDate),e.createElement(p,{whiteSpace:"nowrap"},e.createElement(i,{onClick:()=>{u(a),S(!0),m.onOpen()}},t("Edit")),e.createElement(q,null,e.createElement(z,null,e.createElement(i,{ml:"1",colorScheme:"red"},t("Delete"))),e.createElement(J,{whiteSpace:"normal"},e.createElement(K,null),e.createElement(Q,null),e.createElement(W,null,t("Confirmation!")),e.createElement(Y,null,e.createElement(Z,{mb:"1"},t('Are you sure you want to delete "{{name}}" ?',{name:a.userName})),e.createElement(i,{colorScheme:"red",ml:"1",onClick:()=>{y.delete("user",{params:{id:a.id}}).then(c=>{const l=c.data;l.code!==200?s({title:t(l.message),status:"error",duration:3e3,isClosable:!0}):(s({title:t(l.message),status:"success",duration:3e3,isClosable:!0}),E())})}},t("Confirm")))))))})))),e.createElement(_,{isOpen:m.isOpen,onClose:m.onClose,size:"6xl"},e.createElement(ee,null),e.createElement(te,null,e.createElement(ae,null,t(g?"Save":"Add")),e.createElement(se,null),e.createElement(re,{pb:6},e.createElement(ne,{spacing:"2"},[{name:"userName",description:"User name",type:"string"},{name:"password",description:"Password",type:"string"},{name:"metas",description:"permitted metas for this user",type:"checkbox"},{name:"isActive",description:"whenever user is active or not)",type:"bool"},{name:"dueDate",description:"user access expiration date",type:"date"}].map(a=>{var r,c;return e.createElement(oe,{key:a.name,label:a.name,type:a.type,description:a.description,value:o[a.name],dateValue:new Date(o.dueDate),checkboxGroupValues:(c=(r=o.metas)==null?void 0:r.map(l=>l.path))!=null?c:[],required:a.name==="path",values:a.type==="checkbox"?b.map(l=>l.path):[],onChange:l=>{a.type==="checkbox"?u(h(f({},o),{metas:b.filter(P=>o.metas.map(j=>j.path).includes(P.path))})):a.type==="date"?u(h(f({},o),{[a.name]:l==null?void 0:l.toISOString()})):a.type!=="bool"?u(h(f({},o),{[a.name]:l})):u(h(f({},o),{[a.name]:!o[a.name]}))}})}))),e.createElement(le,null,e.createElement(i,{mr:3,colorScheme:"gray",onClick:m.onClose},t("Cancel")),e.createElement(i,{onClick:()=>{y.post(`user/${g?"save":"create"}`,o).then(a=>{const r=a.data;r.code!==200?(s({title:t(r.message),status:"error",duration:3e3,isClosable:!0}),g||(E(),m.onClose())):(s({title:t(r.message),status:"success",duration:3e3,isClosable:!0}),E(),m.onClose())})}},t("Save"))))))};export{Ee as default};
